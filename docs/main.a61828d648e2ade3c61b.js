(()=>{'use strict';class a{static fromJSON({id:b,carpeta:c}){const d=new a(c);return d.id=b,d}constructor(a){this.carpeta=a,this.id=new Date().getTime()}}class b{static fromJSON({id:a,nota:c,completado:d,creado:e,carpetaId:f}){const g=new b(c);return g.id=a,g.completado=d,g.creado=e,g.carpetaId=f,g}constructor(a,b){this.nota=a,this.id=new Date().getTime(),this.completado=!1,this.creado=new Date,this.carpetaId=b}}const c=new class{constructor(){this.cargarNotas()}nueva(a){this.notas.push(a),this.guardarNotas()}borrar(a){this.notas=this.notas.filter((b)=>b.id!=a),this.guardarNotas()}completar(a){for(const b of this.notas)if(b.id==a){b.completado=!b.completado,this.guardarNotas();break}}guardarNotas(){localStorage.setItem('notas',JSON.stringify(this.notas))}cargarNotas(){this.notas=localStorage.getItem('notas')?JSON.parse(localStorage.getItem('notas')):[],this.notas=this.notas.map(b.fromJSON)}},d=document.createElement('input');d.setAttribute('id','addNota'),d.setAttribute('placeholder','Agregar Nota');const f=d,g=document.querySelector('#notas'),e=document.querySelector('#panel-central'),h=(a)=>{const b=document.createElement('li');b.classList.add('nota'),b.setAttribute('id',a.id),b.innerHTML=` <input type="checkbox"> ${a.nota}<img class="ico ico-del" src="./assets/ico-del.png">`,g.appendChild(b)};f.addEventListener('keyup',(a)=>{if('Enter'===a.key&&''!=f.value){const a=new b(f.value,e.getAttribute('data-id'));c.nueva(a),h(a),f.value=''}}),g.addEventListener('click',(a)=>{const b=a.target.localName,d=a.target.parentElement,e=d.getAttribute('id');'input'===b?(c.completar(e),d.classList.toggle('completado')):'ico-del'==a.target.classList[1]&&(c.borrar(e),g.removeChild(d))});const i=new class{constructor(){this.cargarCarpetas()}nueva(a){this.carpetas.push(a),this.guardarCarpetas()}borrar(a){this.carpetas=this.carpetas.filter((b)=>b.id!=a),this.guardarCarpetas()}guardarCarpetas(){localStorage.setItem('carpetas',JSON.stringify(this.carpetas))}cargarCarpetas(){this.carpetas=localStorage.getItem('carpetas')?JSON.parse(localStorage.getItem('carpetas')):[],this.carpetas=this.carpetas.map(a.fromJSON)}},j=document.querySelector('#carpetas'),k=document.querySelector('#addCarpeta'),l=document.querySelector('#panel-central'),m=document.querySelector('#carpeta-id'),n=document.querySelector('#notas'),o=(a)=>{const b=document.createElement('li');b.classList.add('carpeta'),b.setAttribute('id',a.id),b.innerHTML=`<img class="folder" src="./assets/ico-folder.png">${a.carpeta}<img class="ico ico-del" src="./assets/ico-del.png">`,j.appendChild(b)};i.carpetas.forEach(o),k.addEventListener('keyup',(b)=>{if('Enter'===b.key&&''!=k.value){const b=new a(k.value);i.nueva(b),o(b),k.value=''}}),j.addEventListener('click',(a)=>{const b=a.target.localName,d=a.target.parentElement,e=d.getAttribute('id');if('li'===b){l.prepend(f),l.setAttribute('data-id',a.target.id),m.innerText=a.target.innerText,n.innerHTML='';for(const b of c.notas)if(b.carpetaId==a.target.id){h(b);const a=document.getElementById(b.id);!0==b.completado&&(a.classList.add('completado'),a.firstElementChild.setAttribute('checked','checked'))}}else'ico-del'==a.target.classList[1]&&(c.notas=c.notas.filter((a)=>a.carpetaId!=e),localStorage.setItem('notas',JSON.stringify(c.notas)),n.innerHTML='',m.innerHTML='',i.borrar(e),j.removeChild(d))})})();